<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- <meta http-equiv="refresh" content="2"> -->
    <link rel="stylesheet" href="mainStyle.css">
    1
<link href='https://unpkg.com/boxicons@2.1.1/css/boxicons.min.css' rel='stylesheet'>
    <title>Traffic Detector us</title>
    <script src="navbar.js"></script>
    <style>
        .container {
            display: flex;
            justify-content: space-between;
        }

        .lane {
            width: 23%;
            border: 1px solid black;
            padding: 10px;
            text-align: center;
        }

        .count {
            font-size: 24px;
            font-weight: bold;
        }

        .image {
            margin-top: 100px;
            height: 500px;
            border-radius:25% ;
            position: center;
        }
        .image-container {
  display: flex;
  flex-wrap: wrap;
}

.image-container img {
  width:calc(98% /4); /* Set each image to take up half of the container width */
  height: auto; /* Maintain aspect ratio */
  box-sizing: border-box; /* Include padding and border in image dimensions */
  padding: 10px; /* Add some spacing between images */
  border: 2px solid #ccc; /* Add a border around each image */
  top:2px;
  align-items: center;
}


    </style>
    <style>
        .image img {
            width: 50px; /* Adjust the width as needed */
            height: 50px; /* Adjust the height as needed */
            border-radius: 50%; 
            background-color: blue;/* Adjust the border-radius as needed */
            /* Add any other desired styles */
        }
    </style>
    
    <script src="traffic.js"></script>
    <!-- <script>
        setInterval(function() {
  var img = document.getElementById('myImage');
  console.log(img);
//   var timestamp = new Date().getTime();
  img.src = "DjangoProject/trafficLight/traffic_light_app/lane_0.jpg";
}, 2000)

    </script> -->
</head>

<body onload="receiveFrames()">
  <nav class="sidebar close">
               <div class="image-text">
                   <span class="image">
                       <img src="images/icon.jpg" alt="">
                   </span>
                   <div class="text logo-text">
                       <span class="name">Smart Traffic Light</span>
                       <span class="profession">System</span>
                   </div>
               </div>
               <header><i class='bx bx-chevron-right toggle'></i></header>
               
       <div class="menu-bar">
           <div class="menu">
               <li class="search-box">
                   <i class='bx bx-search icon'></i>
                   <input type="text" placeholder="Search...">
               </li>
            </li>
            <ul class="menu-links">
                <li class="index.html">
                    <a href="index.html" onclick="showHomePage()">
                        <i class='bx bx-home-alt icon' ></i>
                        <span class="text nav-text">Dashboard</span>
                    </a>
                </li>
                <li class="nav-link">
                    <a href="simulation.html" onclick="showSimulatePage()">
                        <i class='bx bx-bar-chart-alt-2 icon' ></i>
                        <span class="text nav-text">Simulation</span>
                    </a>
                </li>
                   <li class="nav-link">
                       <a href="#">
                           <i class='bx bx-pie-chart-alt icon' ></i>
                           <span class="text nav-text">Analytics</span>
                       </a>
                   </li>
                   
                   
               </ul>
           </div>
           <div class="bottom-content">
               <li class="">
                   <a href="#">
                       <i class='bx bx-log-out icon' ></i>
                       <span class="text nav-text">Logout</span>
                   </a>
               </li>
               <li class="mode">
                   <div class="sun-moon">
                       <i class='bx bx-moon icon moon'></i>
                       <i class='bx bx-sun icon sun'></i>
                   </div>
                   <span class="mode-text text">Dark mode</span>
                   <div class="toggle-switch">
                       <span class="switch"></span>
                   </div>
               </li>
               
           </div>
       </div>
   </nav>
   <section class="home">
       <div class="text">    
           <div class="container">
           <div class="lane">
               <h2>Lane 1</h2>
               <div class="count">0</div>
               <img class="image" src="images/red.png">
           </div>
           <div class="lane">
               <h2>Lane 2</h2>
               <div class="count">11</div>
               <img class="image" src="images/red.png">
           </div>
           <div class="lane">
               <h2>Lane 3</h2>
               <div class="count">22</div>
               <img class="image" src="images/red.png">
           </div>
           <div class="lane">
               <h2>Lane 4</h2>
               <div class="count">5</div>
               <img class="image" src="images/red.png">
           </div>
       </div>
       <div class="image-container">
        <div class="frame-container">
          <img class="" id="myImage0" src="DjangoProject/trafficLight/traffic_light_app/lane_0.jpg" alt="Streamed Frame 0">
          <img class="" id="myImage1" src="DjangoProject/trafficLight/traffic_light_app/lane_1.jpg" alt="Streamed Frame 1">
          <img class="" id="myImage2" src="DjangoProject/trafficLight/traffic_light_app/lane_2.jpg" alt="Streamed Frame 2">
          <img class="" id="myImage3" src="DjangoProject/trafficLight/traffic_light_app/lane_3.jpg" alt="Streamed Frame 3">
          <script>
            setInterval(refreshImages, 5000);
      
            function refreshImages() {
              var timestamp = new Date().getTime();
      
              var imgElements = document.querySelectorAll(".frame-container img");
              imgElements.forEach(function(imgElement) {
                imgElement.src = imgElement.src.split("?")[0] + "?" + timestamp;
              });
            }
          </script>
        </div>
      </div>
   </section>
   <script>
       const body = document.querySelector('body'),
     sidebar = body.querySelector('nav'),
     toggle = body.querySelector(".toggle"),
     searchBtn = body.querySelector(".search-box"),
     modeSwitch = body.querySelector(".toggle-switch"),
     modeText = body.querySelector(".mode-text");
toggle.addEventListener("click" , () =>{
   sidebar.classList.toggle("close");
})
searchBtn.addEventListener("click" , () =>{
   sidebar.classList.remove("close");
})
modeSwitch.addEventListener("click" , () =>{
   body.classList.toggle("dark");
   
   if(body.classList.contains("dark")){
       modeText.innerText = "Light mode";
   }else{
       modeText.innerText = "Dark mode";
       
   }
});
   </script>
   <script>
    function showSimulatePage() {
        var simulateSection = document.getElementById('simulateSection');
        simulateSection.classList.add('show');
    }
</script>
</script>
<script>
 function showHomePage() {
     var HomeSection = document.getElementById('HomeSection');
     simulateSection.classList.add('show');
 }
</script>
    <!-- <div class="image-container">
        <div class="image">
            <img id="myImage0" src="DjangoProject/trafficLight/traffic_light_app/lane_0.jpg" alt="Streamed Frame 0">
            <img id="myImage1" src="DjangoProject/trafficLight/traffic_light_app/lane_1.jpg" alt="Streamed Frame 0">
            <img id="myImage2" src="DjangoProject/trafficLight/traffic_light_app/lane_2.jpg" alt="Streamed Frame 0">
            <img id="myImage3" src="DjangoProject/trafficLight/traffic_light_app/lane_3.jpg" alt="Streamed Frame 0">
            <script>
    var imageCount = 4; // Number of images
    for (var i = 0; i < imageCount; i++) {
        setInterval(function() {
            var imgElement = document.getElementById("myImage" + i);
            var timestamp = new Date().getTime();
            imgElement.src = "DjangoProject/trafficLight/traffic_light_app/lane_" + i + ".jpg?" + timestamp;
        }, 5000);
    }
                // setInterval(function() {
                //     var imag
                //     var imgElement0 = document.getElementById("myImage0");
                //     imgElement0.src = "DjangoProject/trafficLight/traffic_light_app/lane_0.jpg?" + timestamp;

                //     var imgElement1 = document.getElementById("myImage1");
                //     imgElement1.src = "DjangoProject/trafficLight/traffic_light_app/lane_1.jpg?" + timestamp;

                //     var imgElement2 = document.getElementById("myImage2");
                //     imgElement2.src = "DjangoProject/trafficLight/traffic_light_app/lane_2.jpg?" + timestamp;

                //     var imgElement3 = document.getElementById("myImage3");
                //     imgElement3.src = "DjangoProject/trafficLight/traffic_light_app/lane_3.jpg?" + timestamp;

                // }, 5000); // refresh the image every 2 seconds
            </script>
        </div>
      </div> -->
      <div class="image-container">
        <div class="frame-container">
          <img class="" id="myImage0" src="DjangoProject/trafficLight/traffic_light_app/lane_0.jpg" alt="Streamed Frame 0">
          <img class="" id="myImage1" src="DjangoProject/trafficLight/traffic_light_app/lane_1.jpg" alt="Streamed Frame 1">
          <img class="" id="myImage2" src="DjangoProject/trafficLight/traffic_light_app/lane_2.jpg" alt="Streamed Frame 2">
          <img class="" id="myImage3" src="DjangoProject/trafficLight/traffic_light_app/lane_3.jpg" alt="Streamed Frame 3">
          <script>
            setInterval(refreshImages, 5000);
      
            function refreshImages() {
              var timestamp = new Date().getTime();
      
              var imgElements = document.querySelectorAll(".frame-container img");
              imgElements.forEach(function(imgElement) {
                imgElement.src = imgElement.src.split("?")[0] + "?" + timestamp;
              });
            }
          </script>
        </div>
      </div>
    
</body>

</html>